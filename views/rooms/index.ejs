<% include ../partials/header %>
<% include ../partials/nav %>
<% include ../partials/standardwidth %>
<section class="d-flex breadcrumbs container-fluid section-narrow">
  <div class="breadcrumbs-items d-flex align-items-center justify-content-between">
    <p><a href="/">Home</a> &gt; Rooms </p>
  </div>
</section>
<section class="container section-narrow">
  <% include ../partials/flashmessages %>
  <div class="row room-index">
  <% rooms.forEach(function(room) { %>
    <div class="col-lg-4 col-md-6">
      <a class="room-link" href="/rooms/<%= room.id %>">
        <img class="img-thumbnail" src="/static/<%= room.picture %>">
        <h3 class="room-name"><%= room.name %></h3>
        <p class="room-location"><%= room.location %></p>
        <p><%= room.description %></p>
        <div class="row pb-3">
          <div class="col-8">
            <p class="unit"><span class="price">€<%= room.price_per_hour %><% if ((room.price_per_hour*10)%10 !== 0) {%>0<% } %></span> per hour</p>
          </div>
          <div class="col-4">
            <p class="review"><span class="rating"><%
              var total_rating = 0;
              room.reviews.forEach(function(review) {
                total_rating += review.rating;
              });
              var average = total_rating / room.reviews.length;
              for (i=0; i<average; i++) { %>★<% } %>
            </span></p>
          </div>
        </div>
      </a>
    </div>
  <% }); %>
  </div>
</section>
<% include ../partials/footer %>
